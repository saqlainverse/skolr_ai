const meta_token=document.head.querySelector('meta[name="csrf-token"]');let token="";meta_token&&(token=meta_token.content);const paginate=document.head.querySelector('meta[name="paginate"]').content;var counter=paginate;function submitForm(e){$("#"+e).submit()}!function(e){"use strict";e(document).ready(function(){e(document).on("submit",".ajax_form",function(t){t.preventDefault();let a=this;e(a).find(".loading_button").removeClass("d-none"),e(a).find("p.error").text(""),e(a).find(":submit").addClass("d-none");let n=e(a).attr("action"),o=e(a).attr("method"),s=new FormData(a);e(".is_modal").val(),e.ajax({url:n,method:o,data:s,contentType:!1,processData:!1,success:function(t){e(a).find(".loading_button").addClass("d-none"),e(a).find(":submit").removeClass("d-none"),t.success?t.is_reload?t.route?window.location.href=t.route:location.reload():(toastr.success(t.success),e(a).trigger("reset")):toastr.error(t.error)},error:function(t){e(a).find(".loading_button").addClass("d-none"),e(a).find(":submit").removeClass("d-none"),422==t.status?("tab_form"==s.get("type")&&instructorValidate(a),e.each(t.responseJSON.errors,function(t,a){e("."+t+"_error").text(a[0])})):toastr.error(t.responseJSON.error)}})}),e(document).on("click",".status-change",function(t){e(".base_url").val();let a=e(this);var n=a.val().split("/");let o=a.data("field_for");var s=n[0];if("maintenance_mode"==o){if(a.is(":checked"))return t.preventDefault(),e("#maintenance_mode").modal("show");e(".warning_text").addClass("d-none")}"image_optimization"==o&&(a.is(":checked")?e(".optimization_div").removeClass("d-none"):e(".optimization_div").addClass("d-none"));var r=a.data("id");if(e(this).is(":checked"))var i=1;else var i=0;let c={id:r,status:i,data:{name:n[1],value:i}};e.ajax({headers:{"X-CSRF-TOKEN":token},url:s,method:"POST",data:c,success:function(e){200==e.status||"success"==e.status?toastr.success(e.message):(a.prop("checked",!i),toastr.error(e.message))},error:function(e){a.prop("checked",!i),toastr.error(e.message)}})}),e(document).on("change",".notification-action",function(){var t=[];e("input[name='notification_id']:checked").each(function(){t.push(e(this).val())});var a=e(this).val(),n=e(this).attr("data-route");2!=a?e.ajax({headers:{"X-CSRF-TOKEN":token},type:"POST",url:n,data:{selected_id:t,update_type:a},success:function(e){200==e.status?(toastr.success(e.message),window.location.reload()):toastr.error(e.message)},error:function(e){toastr.error(e.message)}}):e(".notification_id").prop("checked",!1)}),e(document).on("change","#language-selector",function(){window.location.href=e(this).find(":selected").data("url")}),e(document).on("keyup",".header_search",function(){var t=e(this).val();if(t.length<2)return!0;e.ajax({headers:{"X-CSRF-TOKEN":token},url:e(this).data("url"),type:"post",data:{q:t},success:function(t){console.log(t.html),e(".quick-search-result").html(t.html)},error:function(e){console.log(e)}})}),e(document).on("change",".changeWebSetting",function(){var t=e('input[name="primary_color"]:checked').val(),a=e('input[name="header"]:checked').val(),n=e('input[name="footer"]:checked').val(),o=e(".update_web_setting").val();e.ajax({headers:{"X-CSRF-TOKEN":token},url:o,type:"post",data:{primary_color:t,header:a,footer:n},success:function(e){"success"==e.status?window.location.reload():toastr.error(e.message),console.log(e)},error:function(e){toastr.error(e.message)}})}),e(document).on("click",".changeWebLanguage",function(){if(e('input[name="language"]:checked')){e(this).val();var t=e(this).attr("data-url");window.location.href=t}}),e(document).ready(function(t){e("#windowLoadModal").modal("show")}),e(document).on("click",".add_to_cart",function(){let t=e(this);t.addClass("d-none"),t.closest(".cart_area").find(".loading_button").removeClass("d-none");var a=e(this).attr("data-id"),n=e(this).attr("data-type"),o=e(this).attr("data-route"),s=e(this).attr("data-quantity");e.ajax({headers:{"X-CSRF-TOKEN":token},type:"POST",data:{id:a,type:n,quantity:s},url:o,success:function(a){t.closest(".cart_area").find(".loading_button").addClass("d-none"),a.error?(t.removeClass("d-none"),toastr.error(a.error)):(e(".added_to_cart").removeClass("d-none"),e(".canvas-inner").html(a.html),toastr.success(a.success),e("#cart_iteam_no").removeClass("d-none"),e("#cart_iteam_no").val(a.total_items))},error:function(e){toastr.error(e.error)}})}),e(document).on("click",".add_remove_wishlist",function(){let t=e(this).find(".wishlist-icon"),a=e(this).attr("data-id");var n=e(this).attr("data-type"),o=e(this).attr("data-route");e.ajax({headers:{"X-CSRF-TOKEN":token},type:"POST",data:{id:a,type:n},url:o,success:function(e){0==e.status?t.html('<i class="fa-heart fal"></i>'):t.html('<i class="fa-heart fas"></i>'),toastr.success(e.success)},error:function(e){toastr.error(e.error)}})}),e(document).on("click",".cart-btn",function(t){t.preventDefault(),e(".off-canvas-wrapper").addClass("canvas-on")}),e(document).on("click",".canvas-close",function(t){t.preventDefault(),e(this).add(".canvas-overlay").removeClass("canvas-on"),e(".off-canvas-wrapper").removeClass("canvas-on")}),e(document).on("change",".lang",function(){e("#lang").submit()})})}(jQuery);